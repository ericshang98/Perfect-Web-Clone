# Nexting

<div align="center">

**AI駆動のWebクローンツール — Claude Agent SDKで構築**

*Webクローン向けのClaude Code。40以上の専門ツールを備えた垂直AIエージェント。*

[English](../../README.md) | [中文](../cn/README_CN.md) | 日本語

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Next.js](https://img.shields.io/badge/Next.js-15.x-black)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19.x-61dafb)](https://react.dev/)
[![Python](https://img.shields.io/badge/Python-3.11+-3776ab)](https://python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115+-009688)](https://fastapi.tiangolo.com/)
[![Playwright](https://img.shields.io/badge/Playwright-1.49+-2EAD33)](https://playwright.dev/)
[![Claude](https://img.shields.io/badge/Claude-Anthropic-cc785c)](https://anthropic.com/)

</div>

**真のAIエージェント** — LLMのラッパーではありません。実際のツール、自己修正ループ、完全なサンドボックス環境を備えたマルチエージェント協調で、ゼロから本番対応コードを構築。

他のツールはスクリーンショットからコードを推測します。私たちは**実際のコード**を抽出します — DOM、スタイル、コンポーネント、インタラクション。スクリーンショットベースのツールでは決して実現できない**ピクセルパーフェクトなクローン**。

https://github.com/user-attachments/assets/248af639-20d9-45a8-ad0a-660a04a17b68

## オープンソースマルチエージェントアーキテクチャ

**このマルチエージェントシステム全体がオープンソースです。** 学び、使い、その上に構築してください。

### なぜマルチエージェント？

従来のシングルモデルAIアプローチは、複雑なタスクで限界に達します。1つのモデルがすべてを処理しようとすると：
- 大きなページでコンテキストウィンドウがオーバーフロー
- 多くの責任を同時に処理するとハルシネーションが発生
- 遅い順次処理

私たちの解決策：**専門エージェントが並列で作業**、それぞれが最も得意なことに集中します。

### なぜ Cursor / Claude Code / Copilot を使わないのか？

試しました。**完全な抽出JSON** — フルDOMツリー、すべてのCSSルール、すべてのアセットURL — を渡しても、シングルモデルツールは苦戦します：

| 課題 | Cursor / Claude Code / Copilot | Nexting マルチエージェント |
|------|-------------------------------|---------------------------|
| **50,000行以上のDOMツリー** | ❌ コンテキストオーバーフロー、重要部分を切り捨て | ✅ DOMエージェントがチャンク処理 |
| **3,000以上のCSSルール** | ❌ 優先度を失い、変数を見逃す | ✅ スタイルエージェントがCSS専門処理 |
| **コンポーネント検出** | ❌ 境界を推測、モノリス生成 | ✅ 専用エージェントがパターン識別 |
| **レスポンシブブレークポイント** | ❌ 単一ビューポートをハードコード | ✅ すべてのメディアクエリを抽出 |
| **ホバー/アニメーション状態** | ❌ 見えない、再現できない | ✅ ブラウザ自動化ですべてキャプチャ |
| **出力品質** | ❌ 「だいたい合ってる」近似 | ✅ ピクセルパーフェクト、本番対応 |

> **核心問題**：200KBの抽出JSONは実用的なコンテキスト制限を超えます。収まったとしても、モデルはDOM→CSS→コンポーネント→コードの全工程で一貫性を維持できません。各ステップには集中した処理が必要です。

**正直な限界**：複雑なアニメーションの完璧な抽出はまだ難しい — しかしそれはクローラーの問題であり、エージェントの問題ではありません。マルチエージェントアーキテクチャ自体は**Webクローン以上のことが可能**です。想像してください：自動リファクタリング、コードベース移行、ドキュメント生成、または分割統治と専門AIワーカーの恩恵を受けるあらゆるタスク。

### Agent + Tools + Sandbox パターン

```
┌─────────────────────────────────────────────────────────┐
│                  マルチエージェントシステム               │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐     │
│  │ DOMエージェント│  │スタイルエージェント│  │コードエージェント│     │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘     │
│         │                │                │             │
│         ▼                ▼                ▼             │
│  ┌─────────────────────────────────────────────────┐   │
│  │                   ツール層                       │   │
│  │  • ファイル操作  • コード分析                    │   │
│  │  • ブラウザ制御  • API呼び出し                   │   │
│  └─────────────────────────────────────────────────┘   │
│                         │                               │
│                         ▼                               │
│  ┌─────────────────────────────────────────────────┐   │
│  │            サンドボックス (BoxLite)              │   │
│  │  安全なコード生成、テスト、                      │   │
│  │  プレビューのための隔離実行環境                  │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

このパターン — **Agent + Tools + Sandbox** — は任意のAIエージェント製品に再利用可能です：

| コンポーネント | 目的 | Nextingでの実装 |
|---------------|------|-----------------|
| **Agents** | 集中した責任を持つ専門AIワーカー | DOM、スタイル、コンポーネント、コードエージェント |
| **Tools** | エージェントが呼び出せる機能 | ファイルI/O、ブラウザ自動化、API呼び出し |
| **Sandbox** | 安全な実行環境 | [BoxLite](https://github.com/boxlite-ai/boxlite) - 組み込みマイクロVMランタイム |

> **BoxLite**: AIエージェント向けのハードウェアレベル隔離マイクロVM。root権限不要、真のカーネル分離でOCIコンテナを実行。→ [github.com/boxlite-ai/boxlite](https://github.com/boxlite-ai/boxlite)

### お問い合わせ

このアーキテクチャで何かを構築していますか？質問がありますか？お気軽にどうぞ：

[![Twitter](https://img.shields.io/badge/Twitter-@ericshang98-1DA1F2?style=flat&logo=twitter)](https://twitter.com/ericshang98)
[![GitHub](https://img.shields.io/badge/GitHub-ericshang98-181717?style=flat&logo=github)](https://github.com/ericshang98)

---

## 目次

- [オープンソースマルチエージェントアーキテクチャ](#オープンソースマルチエージェントアーキテクチャ)
- [エージェントツールキット](#エージェントツールキット)
- [なぜNexting？](#なぜnexting)
- [機能](#機能)
- [デモ](#デモ)
- [はじめに](#はじめに)
- [アーキテクチャ](#アーキテクチャ)
- [APIリファレンス](#apiリファレンス)
- [技術スタック](#技術スタック)
- [コントリビューション](#コントリビューション)
- [ライセンス](#ライセンス)

## エージェントツールキット

**[Claude Agent SDK](https://docs.anthropic.com/en/docs/agents-and-tools/claude-agent-sdk)** で構築 — Claude Codeと同じ基盤です。これはAPI呼び出し付きのチャットボットではありません。隔離されたサンドボックスで考え、計画し、実行し、自己修正する**真のエージェント**です。

### 10カテゴリ40以上のツール

| カテゴリ | ツール | 目的 |
|---------|--------|------|
| **ファイル操作** | `read_file`, `write_file`, `edit_file`, `delete_file`, `rename_file`, `create_directory` | プロジェクトファイルのCRUD操作 |
| **検索と発見** | `glob`, `grep`, `ls`, `search_in_file`, `search_in_project` | ファイルとコンテンツの検索（ripgrep搭載）|
| **タスク管理** | `todo_read`, `todo_write`, `task`, `get_subagent_status` | 進捗追跡、サブエージェント起動 |
| **システム実行** | `bash`, `run_command`, `shell` | サンドボックスで任意のコマンドを実行 |
| **ネットワーク** | `web_fetch`, `web_search` | URLフェッチ、Web検索 |
| **ターミナル** | `create_terminal`, `send_terminal_input`, `get_terminal_output`, `install_dependencies`, `start_dev_server` | 複数ターミナルセッションの管理 |
| **プレビュー** | `take_screenshot`, `get_console_messages`, `get_preview_dom`, `get_preview_status` | ライブプレビュー状態の検査 |
| **診断** | `verify_changes`, `diagnose_preview_state`, `analyze_build_error`, `get_comprehensive_error_snapshot` | デバッグと検証 |
| **自己修復** | `start_healing_loop`, `verify_healing_progress`, `stop_healing_loop` | ビルドエラーの自動修正 |
| **ソースクエリ** | `list_saved_sources`, `get_source_overview`, `query_source_json` | 抽出したWebサイトデータのクエリ |

### 設計哲学

```
┌────────────────────────────────────────────────────────────┐
│                      Claude Agent SDK                       │
│  ┌──────────────────────────────────────────────────────┐  │
│  │                    Nexting Agent                      │  │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐ │  │
│  │  │プランナー│  │コーダー │  │デバッガー│  │検証器  │ │  │
│  │  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘ │  │
│  │       └──────────┬─┴───────────┬┴────────────┘      │  │
│  │                  ▼             ▼                     │  │
│  │         ┌──────────────────────────────┐            │  │
│  │         │      40以上の専門ツール       │            │  │
│  │         └──────────────┬───────────────┘            │  │
│  └────────────────────────┼────────────────────────────┘  │
│                           ▼                                │
│  ┌──────────────────────────────────────────────────────┐  │
│  │            BoxLiteサンドボックス (マイクロVM)         │  │
│  │       コード実行とプレビューのための隔離環境          │  │
│  └──────────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────────┘
```

**ChatGPT/Claudeチャットとの違いは？**
- **永続的状態**：エージェントはセッション全体でコンテキストを記憶
- **ツールチェーン**：人間の介入なしで10以上のツールを連続実行可能
- **自己修正**：エラーを検出し、根本原因を診断し、自動修正
- **ライブプレビュー**：コードだけでなく、実際のレンダリング出力を確認

## なぜNexting？

### スクリーンショットツール vs コード抽出

ほとんどのAIクローンツールは、ページを画像として見てコードを**推測**します。私たちは**実際のソース**を読み取ります — だから出力は本番環境対応であり、大まかな近似ではありません。

| スクリーンショットベースのツール | Nexting |
|-------------------------------|---------|
| AIがピクセルを解釈 → レイアウトを推測 | 実際のDOMを抽出 → CSSを分析 |
| ハードコードされたピクセル値 | フレキシブルユニットによるレスポンシブ |
| インタラクションなし | ホバーエフェクトとアニメーションを保持 |
| divだらけ | セマンティックHTMLを保持 |
| 保守不可能な出力 | クリーンでモジュラーなコンポーネント |

## 機能

### Webエクストラクター
- **フルページキャプチャ** - Playwrightを使用して完全なDOM構造、CSSスタイル、アセットを抽出
- **テーマ検出** - ライトテーマとダークテーマを自動検出してキャプチャ
- **コンポーネント分析** - AI駆動のコンポーネント境界検出
- **技術スタック分析** - ページで使用されているフレームワークとライブラリを識別
- **アセット抽出** - 画像、フォント、その他のリソースをダウンロード

### クローンエージェント
- **マルチエージェントアーキテクチャ** - 専門エージェントが並列で作業し、より高速で正確な結果を実現
- **AIコード生成** - Claudeが抽出データから本番環境対応のコードを生成
- **ライブプレビュー** - WebContainer（StackBlitz）によるリアルタイムコードプレビュー
- **フレームワークサポート** - React、Next.js、Vue、またはプレーンHTMLにエクスポート

### マルチエージェントシステム

従来のシングルモデルアプローチは複雑なページで失敗します。私たちのマルチエージェントシステムは問題を分解します：

| エージェント | 責任 |
|-------------|------|
| **DOM構造エージェント** | 大規模で深くネストされたDOMツリーを処理。セマンティック構造とコンポーネント境界を抽出。 |
| **スタイル分析エージェント** | 数千のCSSルールを処理。計算されたスタイル、CSS変数、ブレークポイントをキャプチャ。 |
| **コンポーネント検出エージェント** | コードベース全体で再利用可能なパターンを識別し、モジュラーな出力を実現。 |
| **コード生成エージェント** | すべての出力を本番環境対応のフレームワーク固有のコードに合成。 |

## デモ

<div align="center">

https://github.com/user-attachments/assets/248af639-20d9-45a8-ad0a-660a04a17b68

</div>

## はじめに

### 必要条件

- Python 3.11+
- Node.js 18+
- Anthropic API Key

### クイックスタート

1. **リポジトリをクローン**

```bash
git clone https://github.com/ericshang98/perfect-web-clone.git
cd perfect-web-clone
```

2. **バックエンドのセットアップ**

```bash
cd backend

# 環境変数ファイルをコピーしてAPIキーを追加
cp ../.env.example .env
# .envを編集してANTHROPIC_API_KEYを追加

# サーバーを起動（依存関係を自動インストール）
sh start.sh
```

3. **フロントエンドのセットアップ**

```bash
cd frontend

# 依存関係をインストール
npm install

# 環境変数を設定（オプション）
cp ../.env.example .env.local

# 開発サーバーを起動
npm run dev
```

4. **アプリケーションを開く**

ブラウザで [http://localhost:3000](http://localhost:3000) にアクセスしてください。

### 使用方法

#### 1. Webサイトを抽出

1. **Extractor** ページに移動
2. 抽出するURLを入力
3. 抽出オプション（ビューポート、テーマなど）を設定
4. **Analyze** をクリックして抽出を開始
5. 完了したら、**Save to Cache** をクリックして結果を保存

#### 2. AIでクローン

1. **Agent** ページに移動
2. **Sources** ボタンをクリックしてソースパネルを開く
3. キャッシュされた抽出結果を選択
4. AIとチャットしてコードを生成
5. エージェントがコードを書く間、ライブプレビューを確認

## アーキテクチャ

```
nexting/
├── backend/                 # Python FastAPI バックエンド
│   ├── cache/              # 抽出結果のメモリキャッシュ
│   ├── extractor/          # Playwrightベースのウェブエクストラクター
│   ├── agent/              # Claude統合のマルチエージェントシステム
│   ├── boxlite/            # バックエンドサンドボックス環境
│   ├── image_proxy/        # 画像CORSプロキシ
│   └── image_downloader/   # バッチ画像ダウンロードサービス
│
├── frontend/               # Next.js フロントエンド
│   ├── src/app/           # App Routerページ
│   ├── src/components/    # Reactコンポーネント
│   │   ├── ui/           # Shadcn/UIコンポーネント
│   │   ├── landing/      # ランディングページセクション
│   │   ├── extractor/    # エクストラクターコンポーネント
│   │   └── agent/        # エージェントチャット＆プレビュー
│   ├── src/hooks/        # カスタムReact Hooks
│   └── src/lib/          # ユーティリティとAPIクライアント
│
├── docs/                  # ドキュメントとアセット
│   ├── assets/           # デモ動画と画像
│   ├── cn/               # 中国語ドキュメント
│   └── ja/               # 日本語ドキュメント
│
└── .env.example          # 環境変数テンプレート
```

## APIリファレンス

### エクストラクターAPI

| エンドポイント | メソッド | 説明 |
|---------------|---------|------|
| `/api/extractor/extract` | POST | ウェブページ抽出を開始 |
| `/api/extractor/status/{id}` | GET | 抽出ステータスをポーリング |

### キャッシュAPI

| エンドポイント | メソッド | 説明 |
|---------------|---------|------|
| `/api/cache/store` | POST | 抽出結果をキャッシュに保存 |
| `/api/cache/list` | GET | キャッシュされた抽出結果を一覧表示 |
| `/api/cache/{id}` | GET | キャッシュされた抽出結果を取得 |
| `/api/cache/{id}` | DELETE | キャッシュされた抽出結果を削除 |

### エージェントAPI

| エンドポイント | メソッド | 説明 |
|---------------|---------|------|
| `/api/agent/ws` | WebSocket | AIエージェント通信 |

### BoxLite API

| エンドポイント | メソッド | 説明 |
|---------------|---------|------|
| `/api/boxlite/*` | 各種 | バックエンドサンドボックス環境 |
| `/api/boxlite-agent/*` | 各種 | エージェントサンドボックス操作 |

## 技術スタック

| カテゴリ | 技術 |
|---------|------|
| **フロントエンド** | Next.js 15, React 19, TailwindCSS 4, Shadcn/UI, Three.js |
| **バックエンド** | FastAPI, Python 3.11+, Playwright, WebSocket |
| **AI** | Claude (Anthropic API), マルチエージェントアーキテクチャ |
| **プレビュー** | WebContainer (StackBlitz) |
| **スタイリング** | TailwindCSS, CSS変数, ダークモードサポート |

## コントリビューション

コントリビューションは大歓迎です！お気軽にPull Requestを送ってください。

1. リポジトリをフォーク
2. フィーチャーブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. Pull Requestを開く

## ライセンス

このプロジェクトはMITライセンスの下でライセンスされています - 詳細は [LICENSE](../../LICENSE) ファイルを参照してください。

---

<div align="center">

**[Nexting](https://github.com/ericshang98/perfect-web-clone)** - 推測ではなく、実際のコードを抽出。

[Eric Shang](https://github.com/ericshang98) が ❤️ を込めて作成

</div>
